---
title: Overview
description: How the WAYWO data pipeline transforms raw Hacker News threads into structured, searchable project data through four stages.
navigation.icon: i-lucide-eye
---

# Pipeline Overview

The WAYWO data pipeline converts unstructured Hacker News "What are you working on?" threads into structured, searchable project records. It runs in four sequential stages, each building on the output of the previous one.

## The Four Stages

### 1. Post Collection

Fetch monthly HN posts listed in `waywo.yml`. Each entry maps an HN item ID to a year and month. The pipeline calls the HN Firebase API to retrieve the full post object and stores it as a `WaywoPost` in SQLite.

### 2. Comment Extraction

For each collected post, fetch its top-level comments (the `kids` array). Each top-level comment represents one person's project submission. Comments are stored as `WaywoComment` records with an `is_processed` flag to track pipeline progress.

### 3. Project Processing

Each unprocessed comment is run through the **WaywoProjectWorkflow**, a LlamaIndex event-driven workflow with seven steps:

1. Extract projects from comment text (handles multi-project comments)
2. Validate whether the text describes a real project
3. Fetch and scrape linked URLs via Firecrawl
4. Generate metadata (title, description, hashtags, URL summaries)
5. Score the project on idea quality and complexity (1--10)
6. Generate a 4096-dimensional vector embedding
7. Finalize and save to the database

### 4. Trigger Mechanisms

The pipeline can be triggered in three ways:

- **API endpoints** -- `POST /api/process-waywo-posts` and `POST /api/process-waywo-comments` queue Celery tasks via the FastAPI backend
- **Celery tasks** -- Call tasks directly from code or from the Flower dashboard (e.g., `process_waywo_posts.delay()`)
- **Celery Beat** -- The beat scheduler in `celery_beat.py` supports cron-based automated runs (currently configured as a placeholder for custom schedules)

## Data Flow Diagram

```
waywo.yml
  |
  v
[Post Collection]  -->  HN Firebase API  -->  SQLite (waywo_posts)
  |
  v
[Comment Extraction]  -->  HN Firebase API  -->  SQLite (waywo_comments)
  |
  v
[Project Workflow]  -->  LLM + Firecrawl + Embeddings  -->  SQLite (waywo_projects + vectors)
```

## Synthetic Generation

In addition to extracting projects from real HN comments, WAYWO can generate novel project ideas using NVIDIA's NeMo Data Designer library. This pipeline learns from the tag patterns and co-occurrence statistics of existing projects to produce realistic synthetic entries.

See [Data Designer](/data-designer/overview) for the full pipeline architecture.

## Key Design Decisions

- **Idempotent processing** -- Comments already in the database are skipped during collection. The `is_processed` flag prevents duplicate workflow runs. Reprocessing a comment deletes its old projects first.
- **Concurrency of 1** -- The Celery worker runs with `--concurrency=1` on the `waywo` queue, ensuring sequential processing to avoid overwhelming external services (LLM, embedding, Firecrawl).
- **Retry with backoff** -- The `process_waywo_comment` task retries up to 3 times with exponential backoff on failure.
- **Invalid project filtering** -- Projects that fail validation (personal tasks, questions, vague statements) are not saved to the database, keeping the index clean.
