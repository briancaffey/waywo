---
title: API Endpoints
description: REST and WebSocket endpoints for voice chat — thread CRUD, voice listing, and the main WebSocket handler.
navigation.icon: i-lucide-plug
---

# Voice API Endpoints

Voice Mode exposes REST endpoints for thread management and voice listing, plus a WebSocket endpoint for the real-time voice chat.

## List Available Voices

Return all TTS voices parsed into a structured format with language grouping.

```
GET /api/voice/voices
```

**Response:** `200 OK`

```json
{
  "voices": [
    {
      "id": "Magpie-Multilingual.EN-US.Mia.Happy",
      "language": "EN-US",
      "speaker": "Mia",
      "emotion": "Happy",
      "label": "Mia (Happy)"
    }
  ]
}
```

## List Threads

Return voice chat threads sorted by most recently updated.

```
GET /api/voice/threads
```

**Query Parameters:**

| Parameter | Type | Default | Description |
|-----------|------|---------|-------------|
| `limit` | `int` | `50` | Max threads to return (1-200) |
| `offset` | `int` | `0` | Pagination offset |
| `q` | `string` | -- | Search threads by title |

**Response:** `200 OK`

```json
{
  "threads": [
    {
      "id": "a1b2c3d4-...",
      "title": "Rust CLI Tools",
      "system_prompt": null,
      "created_at": "2025-01-15T10:00:00",
      "updated_at": "2025-01-15T10:05:00",
      "turns": []
    }
  ],
  "total": 12
}
```

## Create Thread

Create a new voice chat thread.

```
POST /api/voice/threads
```

**Request Body (optional):**

```json
{
  "title": "My Conversation"
}
```

If `title` is omitted, defaults to "New conversation". Threads are also created automatically by the WebSocket handler when no `thread_id` is provided.

**Response:** `201 Created`

```json
{
  "id": "a1b2c3d4-...",
  "title": "My Conversation",
  "system_prompt": null,
  "created_at": "2025-01-15T10:00:00",
  "updated_at": "2025-01-15T10:00:00",
  "turns": []
}
```

## Get Thread

Get a single thread with all its turns.

```
GET /api/voice/threads/{thread_id}
```

**Response:** `200 OK`

```json
{
  "id": "a1b2c3d4-...",
  "title": "Rust CLI Tools",
  "system_prompt": null,
  "created_at": "2025-01-15T10:00:00",
  "updated_at": "2025-01-15T10:05:00",
  "turns": [
    {
      "id": 1,
      "thread_id": "a1b2c3d4-...",
      "role": "user",
      "text": "Tell me about Rust CLI frameworks",
      "audio_duration_seconds": null,
      "tts_voice": null,
      "token_count": null,
      "llm_duration_ms": null,
      "tts_duration_ms": null,
      "stt_duration_ms": 150,
      "created_at": "2025-01-15T10:00:05"
    },
    {
      "id": 2,
      "thread_id": "a1b2c3d4-...",
      "role": "assistant",
      "text": "There are several popular Rust CLI frameworks...",
      "audio_duration_seconds": null,
      "tts_voice": "Magpie-Multilingual.EN-US.Mia.Happy",
      "token_count": null,
      "llm_duration_ms": 850,
      "tts_duration_ms": 420,
      "stt_duration_ms": null,
      "created_at": "2025-01-15T10:00:06"
    }
  ]
}
```

**Error:** `404` if thread not found.

## Update Thread

Update a thread's title.

```
PUT /api/voice/threads/{thread_id}
```

**Request Body:**

```json
{
  "title": "New Title"
}
```

**Response:** `200 OK` — Updated thread object.

**Error:** `404` if thread not found.

## Delete Thread

Delete a thread and all its turns (cascade delete).

```
DELETE /api/voice/threads/{thread_id}
```

**Response:** `200 OK`

```json
{
  "ok": true
}
```

**Error:** `404` if thread not found.

## WebSocket: Voice Chat

The main voice chat endpoint. See [WebSocket Protocol](/voice-mode/websocket-protocol) for the full message format.

```
WebSocket /ws/voice-chat?thread_id=<uuid>
```

If `thread_id` is omitted, a new thread is created. The assigned thread ID is returned in the initial `state` message.
