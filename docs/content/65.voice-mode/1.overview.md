---
title: Voice Mode Overview
description: A voice-to-voice chat experience — speak to the LLM and hear its response, with full conversation threading and real-time debug visibility.
navigation.icon: i-lucide-audio-waveform
---

# Voice Mode

Voice Mode provides a speech-to-speech conversation experience. Users speak into their microphone, the speech is transcribed, sent to the LLM, and the response is synthesized as audio and played back — all in real time over a single WebSocket connection.

## Key Features

- **Full voice round-trip** — Mic capture, STT, LLM, TTS, and audio playback in a single flow
- **Persistent threads** — Conversations are saved to the database and can be resumed
- **Conversation context** — The LLM receives the last 20 turns as context for each new message
- **Auto-titling** — New threads are automatically titled based on the first user message
- **Voice selection** — Choose from available TTS voices grouped by language
- **Debug panel** — Real-time visibility into every backend event, timing, and data flow
- **Text display toggle** — Optionally show or hide transcription and response text

## Audio Pipeline

```
[Browser Mic] → PCM 16-bit 16kHz mono
       ↓ (binary WebSocket frames)
[Backend: /ws/voice-chat] → forwards PCM chunks
       ↓ (binary WebSocket frames)
[STT Service: /ws/transcribe] → partial + final transcription
       ↓ (JSON back to backend)
[Backend] → sends transcription + conversation history to LLM
       ↓ (full response)
[TTS Service: POST /v1/audio/synthesize] → WAV audio bytes
       ↓ (binary WebSocket frame)
[Browser] → plays WAV via Web Audio API
```

## State Machine

Each voice connection follows a simple state machine:

```
IDLE → (start_listening) → LISTENING → (stop_listening) → PROCESSING → SPEAKING → IDLE
                                                                                ↑       |
                                                                                |  (turn_complete)
                                                                                +───────+

Any state → (error) → IDLE
Any state → (cancel) → IDLE
```

| State | Description |
|-------|-------------|
| **idle** | Waiting for user to press the talk button |
| **listening** | Mic is active, PCM audio streaming to STT |
| **processing** | STT finalized, LLM generating response |
| **speaking** | TTS audio playing back to user |

## Services Used

Voice Mode integrates three external services:

| Service | Purpose | Connection |
|---------|---------|------------|
| **STT** (Speech-to-Text) | NVIDIA Nemotron speech streaming | WebSocket at `STT_WS_URL` |
| **LLM** | NVIDIA Nemotron-3-Nano-30B | OpenAI-compatible API via LlamaIndex |
| **TTS** (Text-to-Speech) | NVIDIA Magpie NIM | HTTP POST at `TTS_URL` |

::tip
See [Service Map](/architecture/service-map) for the full Docker Compose topology and environment variable configuration.
::
