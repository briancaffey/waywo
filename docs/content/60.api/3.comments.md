---
title: Comments
description: Endpoints for listing, fetching, and processing Hacker News comments from "What are you working on?" threads.
navigation.icon: i-lucide-message-square
---

# Comments

Comments are top-level replies on WAYWO posts. Each comment typically describes one or more projects that a user is working on. Comments are processed through the AI workflow to extract structured project data.

## List Comments

Retrieve a paginated list of stored comments, optionally filtered by post.

```
GET /api/waywo-comments
```

**Query Parameters:**

| Parameter | Type | Default | Description |
|---|---|---|---|
| `limit` | `int` | `50` | Maximum number of comments to return |
| `offset` | `int` | `0` | Number of comments to skip |
| `post_id` | `int \| null` | `null` | Filter comments by parent post ID |

**Example Request:**

```
GET /api/waywo-comments?post_id=38805262&limit=10&offset=0
```

**Response:** `200 OK`

```json
{
  "comments": [
    {
      "id": 38805300,
      "type": "comment",
      "by": "maker123",
      "time": 1704068000,
      "text": "Working on a CLI tool for managing dotfiles...",
      "parent": 38805262,
      "dead": null,
      "deleted": null,
      "kids": [38805350, 38805375]
    }
  ],
  "total": 487,
  "limit": 10,
  "offset": 0,
  "post_id": 38805262
}
```

| Field | Type | Description |
|---|---|---|
| `comments` | `array` | List of `WaywoComment` objects |
| `total` | `int` | Total matching comments (for pagination) |
| `limit` | `int` | Limit that was applied |
| `offset` | `int` | Offset that was applied |
| `post_id` | `int \| null` | Post filter that was applied |

## Get Single Comment

Retrieve a single comment with its parent post information and any extracted projects.

```
GET /api/waywo-comments/{comment_id}
```

**Path Parameters:**

| Parameter | Type | Description |
|---|---|---|
| `comment_id` | `int` | Hacker News comment ID |

**Response:** `200 OK`

```json
{
  "comment": {
    "id": 38805300,
    "type": "comment",
    "by": "maker123",
    "time": 1704068000,
    "text": "Working on a CLI tool for managing dotfiles...",
    "parent": 38805262,
    "dead": null,
    "deleted": null,
    "kids": [38805350]
  },
  "parent_post": {
    "id": 38805262,
    "type": "story",
    "title": "Ask HN: What are you working on? (January 2024)",
    "year": 2024,
    "month": 1
  },
  "projects": [
    {
      "id": 42,
      "source_comment_id": 38805300,
      "title": "DotSync",
      "short_description": "CLI tool for dotfile management",
      "description": "A command-line tool that syncs and manages dotfiles across machines using Git.",
      "hashtags": ["cli", "dotfiles", "devtools"],
      "idea_score": 6,
      "complexity_score": 4,
      "is_valid_project": true,
      "is_bookmarked": false
    }
  ]
}
```

**Error:** `404` if the comment ID does not exist.

## Process Single Comment

Trigger the AI workflow on a specific comment to extract project data. This queues a Celery task that runs the `WaywoProjectWorkflow`.

```
POST /api/waywo-comments/{comment_id}/process
```

**Path Parameters:**

| Parameter | Type | Description |
|---|---|---|
| `comment_id` | `int` | Hacker News comment ID to process |

**Response:** `200 OK`

```json
{
  "status": "task_queued",
  "task_id": "b2c3d4e5-f6a7-8901-bcde-f23456789012",
  "comment_id": 38805300,
  "message": "Processing task queued for comment 38805300"
}
```

**Error:** `404` if the comment ID does not exist.

## Batch Process Comments

Trigger batch processing of all unprocessed comments through the AI workflow. This is the main pipeline step that extracts projects from comments.

```
POST /api/process-waywo-comments
```

**Request Body** (optional):

```json
{
  "limit": 50
}
```

| Field | Type | Default | Description |
|---|---|---|---|
| `limit` | `int \| null` | `null` | Max comments to process (null = all unprocessed) |

**Response:** `200 OK`

```json
{
  "status": "task_queued",
  "task_id": "c3d4e5f6-a7b8-9012-cdef-345678901234",
  "limit": 50,
  "message": "Comment processing task has been queued"
}
```

The task runs asynchronously via Celery. Each comment is run through the full extraction workflow (extract, validate, fetch URLs, generate metadata, score, embed).
