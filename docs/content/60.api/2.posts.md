---
title: Posts
description: Endpoints for listing, fetching, and processing Hacker News "What are you working on?" posts.
navigation.icon: i-lucide-newspaper
---

# Posts

Posts represent monthly Hacker News "What are you working on?" threads. Each post contains metadata from the HN API along with year/month identifiers from the curated `waywo.yml` list.

## List All Posts

Retrieve all stored posts with comment counts, sorted by year and month descending.

```
GET /api/waywo-posts
```

**Parameters:** None

**Response:** `200 OK` -- Array of `WaywoPostSummary` objects.

```json
[
  {
    "id": 38805262,
    "title": "Ask HN: What are you working on? (January 2024)",
    "year": 2024,
    "month": 1,
    "score": 312,
    "comment_count": 487,
    "descendants": 502
  },
  {
    "id": 37771807,
    "title": "Ask HN: What are you working on? (December 2023)",
    "year": 2023,
    "month": 12,
    "score": 289,
    "comment_count": 412,
    "descendants": 430
  }
]
```

| Field | Type | Description |
|---|---|---|
| `id` | `int` | Hacker News item ID |
| `title` | `string \| null` | Post title |
| `year` | `int \| null` | Year from `waywo.yml` |
| `month` | `int \| null` | Month from `waywo.yml` |
| `score` | `int \| null` | HN upvote score |
| `comment_count` | `int` | Number of stored comments |
| `descendants` | `int \| null` | Total descendants from HN API |

## Get Single Post

Retrieve a single post with all of its stored comments.

```
GET /api/waywo-posts/{post_id}
```

**Path Parameters:**

| Parameter | Type | Description |
|---|---|---|
| `post_id` | `int` | Hacker News post ID |

**Response:** `200 OK`

```json
{
  "post": {
    "id": 38805262,
    "type": "story",
    "by": "whoishiring",
    "time": 1704067200,
    "title": "Ask HN: What are you working on? (January 2024)",
    "score": 312,
    "descendants": 502,
    "year": 2024,
    "month": 1,
    "kids": [38805300, 38805315, 38805400]
  },
  "comments": [
    {
      "id": 38805300,
      "type": "comment",
      "by": "maker123",
      "time": 1704068000,
      "text": "Working on a CLI tool for...",
      "parent": 38805262
    }
  ],
  "comment_count": 487
}
```

**Error:** `404` if the post ID does not exist.

## Get Chart Data

Returns post data formatted for bar chart visualization, sorted chronologically with labels in `MM/YY` format.

```
GET /api/waywo-posts/chart-data
```

**Parameters:** None

**Response:** `200 OK`

```json
{
  "posts": [
    {
      "id": 30259828,
      "year": 2022,
      "month": 3,
      "title": "Ask HN: What are you working on? (March 2022)",
      "comment_count": 312,
      "total_comments": 350,
      "label": "03/22",
      "tooltip_title": "Mar 2022"
    }
  ],
  "total_posts": 24
}
```

| Field | Type | Description |
|---|---|---|
| `label` | `string` | Short label for chart axis (`MM/YY`) |
| `tooltip_title` | `string` | Human-readable label (`Mon YYYY`) |
| `comment_count` | `int` | Stored comments in database |
| `total_comments` | `int` | Total descendants from HN API |

## Process Posts

Trigger a Celery background task to fetch posts from the HN API based on the `waywo.yml` configuration and store them with their top-level comments.

```
POST /api/process-waywo-posts
```

**Request Body** (optional):

```json
{
  "limit_posts": 5,
  "limit_comments": 100
}
```

| Field | Type | Default | Description |
|---|---|---|---|
| `limit_posts` | `int \| null` | `null` | Max posts to process (null = all) |
| `limit_comments` | `int \| null` | `null` | Max comments per post (null = all) |

**Response:** `200 OK`

```json
{
  "status": "task_queued",
  "task_id": "a1b2c3d4-e5f6-7890-abcd-ef1234567890",
  "limit_posts": 5,
  "limit_comments": 100
}
```

The task runs asynchronously. Monitor progress through Flower at `http://localhost:5555`.
