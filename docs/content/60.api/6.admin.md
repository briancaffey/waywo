---
title: Admin
description: Administrative endpoints for database statistics, service health checks, data resets, and vector index rebuilding.
navigation.icon: i-lucide-shield
---

# Admin

Admin endpoints provide database statistics, external service health checks, destructive reset operations, and vector index management. These are used by the admin dashboard in the frontend.

## Database Statistics

Get counts and metadata for all database tables, plus Redis connection info.

```
GET /api/admin/stats
```

**Parameters:** None

**Response:** `200 OK`

```json
{
  "posts_count": 24,
  "comments_count": 8500,
  "projects_count": 6200,
  "valid_projects_count": 5800,
  "invalid_projects_count": 400,
  "projects_with_embeddings": 5800,
  "redis_keys_count": 150,
  "redis_memory_used": "12.50M",
  "redis_connected": true
}
```

If Redis is unreachable, the response includes fallback values:

```json
{
  "redis_keys_count": 0,
  "redis_memory_used": "unknown",
  "redis_connected": false,
  "redis_error": "Connection refused"
}
```

## Services Health

Check the health status of all three external AI services: LLM, embedding, and reranking.

```
GET /api/admin/services-health
```

**Parameters:** None

**Response:** `200 OK`

```json
{
  "llm": {
    "status": "healthy",
    "url": "http://192.168.6.19:8002/v1",
    "configured_model": "nvidia/Llama-3_3-Nemotron-Super-49B-v1",
    "available_models": ["nvidia/Llama-3_3-Nemotron-Super-49B-v1"]
  },
  "embedder": {
    "status": "healthy",
    "url": "http://192.168.5.96:8000"
  },
  "reranker": {
    "status": "healthy",
    "url": "http://192.168.5.173:8111",
    "device": "cuda"
  }
}
```

When a service is unreachable, its entry shows the error:

```json
{
  "llm": {
    "status": "unhealthy",
    "url": "http://192.168.6.19:8002/v1",
    "error": "Connection refused"
  }
}
```

## Reset SQLite Database

Delete all data from the SQLite database, including posts, comments, and projects.

```
DELETE /api/admin/reset-sqlite
```

::warning
This permanently deletes all posts, comments, and projects from the database. This action cannot be undone.
::

**Response:** `200 OK`

```json
{
  "status": "success",
  "message": "SQLite database has been reset"
}
```

## Reset Redis

Flush all data from Redis, including Celery task results and broker data.

```
DELETE /api/admin/reset-redis
```

::warning
This flushes all Redis keys including Celery task history and broker queues. Running tasks may be affected.
::

**Response:** `200 OK`

```json
{
  "status": "success",
  "message": "Redis database has been flushed"
}
```

## Reset All

Reset both SQLite and Redis in a single call. If one reset fails, the other still executes and the response reports partial success.

```
DELETE /api/admin/reset-all
```

::warning
This wipes all data from both SQLite and Redis. All posts, comments, projects, embeddings, task history, and cached data will be permanently deleted.
::

**Response:** `200 OK` (full success)

```json
{
  "status": "success",
  "message": "All databases have been reset",
  "results": {
    "sqlite": { "status": "success" },
    "redis": { "status": "success", "message": "flushed" }
  }
}
```

**Response:** `207 Multi-Status` (partial failure)

```json
{
  "status": "partial",
  "message": "Some databases failed to reset",
  "errors": ["Redis: Connection refused"],
  "results": {
    "sqlite": { "status": "success" },
    "redis": { "status": "error", "error": "Connection refused" }
  }
}
```

## Rebuild Vector Index

Rebuild the vector quantization index used by semantic search. Call this after adding new embeddings (e.g., after batch processing comments) to enable fast vector lookups. Safe to call multiple times.

```
POST /api/admin/rebuild-vector-index
```

**Parameters:** None

**Response:** `200 OK`

```json
{
  "status": "success",
  "message": "Vector index rebuilt successfully"
}
```

**Error:** `500` if the index rebuild fails.
